generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}
// User Modoule
enum UserStatus {
  INACTIVE
  ACTIVE
  BLOCKED
}
model User {
  id              String      @id @default(uuid())
  email           String      @unique
  password        String?
  country         String?
  timezone        String?
  name            String?
  roleId          String
  status          UserStatus  @default(INACTIVE) // Status of the invitation
  createdAt       DateTime    @default(now())
  updatedAt       DateTime    @updatedAt
  lastSignInAt    DateTime?
  emailVerifiedAt DateTime?
  isTrashed       Boolean     @default(false)
  avatar          String?
  permissions         String[] // text[]
  last_activity_date  DateTime? // timestamp without time zone
  invitedByUserId String?
  isProtected     Boolean     @default(false) // Prevents deletion/modification
  role            UserRole    @relation(fields: [roleId], references: [id])
  systemLog       SystemLog[]
  accounts        Account[]
  Session         Session[]
  // Relations
  jobsCreated Job[] @relation("JobCreatedBy")
  jobsUpdated Job[] @relation("JobUpdatedBy")
  // Indexes for efficient querying
  @@index([invitedByUserId])
  @@index([roleId])
  @@index([status])
}

model UserRole {
  id              String               @id @default(uuid())
  slug            String               @unique
  name            String               @unique
  description     String?
  isTrashed       Boolean              @default(false)
  createdByUserId String?
  createdAt       DateTime             @default(now())
  isProtected     Boolean              @default(false)
  isDefault       Boolean              @default(false)
  users           User[]
  permissions     UserRolePermission[]
}

model UserPermission {
  id              String               @id @default(uuid())
  slug            String               @unique
  name            String
  description     String?
  createdByUserId String?
  createdAt       DateTime             @default(now())
  roles           UserRolePermission[]
}

model UserRolePermission {
  id           String   @id @default(uuid())
  roleId       String
  permissionId String
  assignedAt   DateTime @default(now())

  role       UserRole       @relation(fields: [roleId], references: [id], onDelete: Cascade)
  permission UserPermission @relation(fields: [permissionId], references: [id], onDelete: Cascade)

  @@unique([roleId, permissionId])
}

model Account {
  id                String  @id @default(cuid())
  userId            String
  type              String
  provider          String
  providerAccountId String
  refresh_token     String? @db.Text
  access_token      String? @db.Text
  expires_at        Int?
  token_type        String?
  scope             String?
  id_token          String? @db.Text
  session_state     String?

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([provider, providerAccountId], name: "provider_providerAccountId")
}

model Session {
  id           String   @id @default(cuid())
  sessionToken String   @unique
  userId       String
  expires      DateTime
  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model VerificationToken {
  identifier String
  token      String   @unique
  expires    DateTime

  @@unique([identifier, token])
}

model SystemLog {
  id          String   @id @default(uuid())
  userId      String
  createdAt   DateTime @default(now())
  entityId    String?
  entityType  String?
  event       String?
  description String?
  ipAddress   String?
  meta        String?

  user User @relation(fields: [userId], references: [id])

  @@index([userId])
}

model SystemSetting {
  id             String  @id @default(uuid())
  name           String  @default("My Company")
  logo           String?
  active         Boolean @default(true)
  address        String?
  websiteURL     String?
  supportEmail   String?
  supportPhone   String?
  language       String  @default("en")
  timezone       String  @default("UTC")
  currency       String  @default("USD")
  currencyFormat String  @default("$ {value}")

  socialFacebook  String?
  socialTwitter   String?
  socialInstagram String?
  socialLinkedIn  String?
  socialPinterest String?
  socialYoutube   String?

  notifyStockEmail               Boolean  @default(true)
  notifyStockWeb                 Boolean  @default(true)
  notifyStockThreshold           Int      @default(10)
  notifyStockRoleIds             String[]
  notifyNewOrderEmail            Boolean  @default(true)
  notifyNewOrderWeb              Boolean  @default(true)
  notifyNewOrderRoleIds          String[]
  notifyOrderStatusUpdateEmail   Boolean  @default(true)
  notifyOrderStatusUpdateWeb     Boolean  @default(true)
  notifyOrderStatusUpdateRoleIds String[]
  notifyPaymentFailureEmail      Boolean  @default(true)
  notifyPaymentFailureWeb        Boolean  @default(true)
  notifyPaymentFailureRoleIds    String[]
  notifySystemErrorFailureEmail  Boolean  @default(true)
  notifySystemErrorWeb           Boolean  @default(true)
  notifySystemErrorRoleIds       String[]
}


model Permissions {
  id        String    @id @default(uuid()) // text, gi·∫£ s·ª≠ l√† UUID ng·∫´u nhi√™n
  idCourse  String?
  dsUser    String[] // text[]
  startTime DateTime?
  endTime   DateTime?
}

model NhanVien {
  id          String    @id @default(uuid())
  hoTen       String
  ngaySinh    DateTime?
  diaChi      String?
  soDienThoai String?
  email       String?   @unique
  chucVu      String?
  phongBan    String?
  ngayVaoLam  DateTime?
  isActive    Boolean   @default(true)
  type        String?
  createdOn   DateTime  @default(now())
  updatedOn   DateTime? @updatedAt
  createdById String?
  updatedById String?
}

model Candidate {
  id              String    @id @default(uuid())
  full_name       String
  email           String
  birthdate       DateTime?
  gender          String?
  position        String?
  experience      String?
  source          String?
  strengths       String?
  weaknesses      String?
  skills          String?
  pipeline_status String?
  reject_reason   String?
  cv_link         String?
  fit_score       Float?
  note            String?       
  cv_summary      String? @db.Text 
  evaluation      String?
  created_at      DateTime  @default(now())
  updated_at      DateTime  @updatedAt
  stage_id        String?
  stage           Stage?   @relation(fields: [stage_id], references: [id])
  job_id          String?
  job             Job?      @relation(fields: [job_id], references: [id])
  test_id String?
  
  // New relation
  cv_uploads CVUpload[]
  activities    Activity[]
  candidate_activities candidate_activity[]
  exams ExamHR[] @relation("CandidateExam")
  examAssignments ExamAssignment[]
}


model CVUpload {
  id           String   @id @default(uuid())
  candidate_id String
  job_id       String
  file_url     String
  hash         String
  status       String
  created_at   DateTime @default(now())

  // Relations
  candidate Candidate @relation(fields: [candidate_id], references: [id], onDelete: Cascade)
  job       Job       @relation(fields: [job_id], references: [id])
}

model Job {
  id           String   @id @default(uuid())
  jobCode      String   @unique
  title        String
  descriptions String?
  requirements String?
  status       JobStatus @default(DRAFT)
  created_at   DateTime @default(now())
  updated_at   DateTime @updatedAt
  created_by   String?
  updated_by   String?
  pipelineId   String?
  startDate    DateTime?
  endDate      DateTime?

  // Relations
  createdBy  User?       @relation("JobCreatedBy", fields: [created_by], references: [id])
  updatedBy  User?       @relation("JobUpdatedBy", fields: [updated_by], references: [id])
  pipeline    HiringPipeline?  @relation("JobPipeline", fields: [pipelineId], references: [id])
  candidates Candidate[]
  cv_uploads CVUpload[]
  interviews  Interview[]
}

enum JobStatus {
  DRAFT
  OPEN
  CLOSED
}

model HiringPipeline {
  id           String   @id @default(uuid())
  name         String
  descriptions String?
  created_at   DateTime @default(now())
  updated_at   DateTime @updatedAt
  created_by   String?
  updated_by   String?
  isDefault    Boolean  @default(false)

  // Relation
  stages Stage[]
  jobs         Job[]    @relation("JobPipeline")
}

model Stage {
  id                 String          @id @default(uuid())
  name               String
  description        String
  isDefault          Boolean         @default(false)
  created_at         DateTime        @default(now())
  updated_at         DateTime        @updatedAt
  created_by         String
  updated_by         String
  settings           Json?
  hiring_pipeline_id String?
  hiring_pipeline    HiringPipeline? @relation(fields: [hiring_pipeline_id], references: [id])
  candidates Candidate[]
}

model Activity {
  id          String   @id @default(uuid())
  name        String?
  description String?
  type        String?
  created_at  DateTime @default(now())
  updated_at  DateTime @updatedAt
  created_by  String
  updated_by  String
  candidateId   String
  candidate     Candidate @relation(fields: [candidateId], references: [id], onDelete: Cascade)
  exam_id      String?  // ID c·ªßa exam khi type === 'test'
} 

model check_list {
  id          String   @id @default(uuid())
  name        String
  description String?
  created_at  DateTime @default(now())
  updated_at  DateTime @updatedAt
  created_by  String
  updated_by  String
}

enum CandidateActivityStatus {
  in_progress
  completed
  cancelled
}

model candidate_activity {
  id           String      @id @default(uuid())
  start_date   DateTime
  end_date     DateTime
  status       CandidateActivityStatus @default(in_progress)
  result       String?     // pending, pass, fail
  noteresult   String?     // Note ri√™ng c·ªßa candidate trong activity n√†y
  check_list   Json? // jsonb 
  assignee     String
  participants String[]
  stage_id     String
  candidate_id String
  task_id      String
  interviews   Interview[]
  examAssignments ExamAssignment[]
  candidate Candidate @relation(fields: [candidate_id], references: [id], onDelete: Cascade)
}

model Interview {
  id                    String              @id @default(uuid())
  isActive              Boolean             @default(true)
  linkExam              String?             // link ph·ªèng v·∫•n (zoom/meet)
  linkInterview         String?             // link kh√°c (n·∫øu c√≥)
  reject_reason         String?
  ngay                  DateTime?           // ng√†y ph·ªèng v·∫•n
  type                  String?
  idcandidate           String?
  candidate_activity_id String?
  location              String?             // üìç ƒë·ªãa ƒëi·ªÉm ph·ªèng v·∫•n
  jobId                 String?             // üîó Job li√™n quan
  confirmed             Boolean             @default(false) // ‚úÖ Tr·∫°ng th√°i x√°c nh·∫≠n tham gia ph·ªèng v·∫•n
  createdOn             DateTime?           @default(now())
  updatedOn             DateTime?           @updatedAt
  createdById           String?
  updatedById           String?

  candidate_activity    candidate_activity? @relation(fields: [candidate_activity_id], references: [id], onDelete: Cascade)
  job                   Job?                @relation(fields: [jobId], references: [id], onDelete: SetNull)
}

model EmailTemplate {
  id        String   @id @default(cuid())
  name      String?
  subject   String?
  body      String?
  type      String?
  variables String[] // m·∫£ng string
  createdBy String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model BaiThi {
  id           String    @id @default(uuid())
  nhanVienId   String // Li√™n k·∫øt v·ªõi NhanVien
  diem         Float? // ƒêi·ªÉm s·ªë (thang 10)
  ngayVaoThi   DateTime  @default(now()) // Ng√†y v√†o thi
  ngaynop      DateTime? // Ng√†y v√†o thi
  soCauDung    Int? // S·ªë c√¢u ƒë√∫ng
  createdOn    DateTime? @default(now())
  updatedOn    DateTime? @updatedAt
  createdById  String?
  updatedById  String?
  idexam       String
  solanthi     Int?
 
  reportCauHoi Json?
  cauHoi       Json? // M·∫£ng JSON ch·ª©a danh s√°ch c√¢u h·ªèi
}

model Section {
  id          String    @id @default(uuid()) // Chuy·ªÉn id sang chu·ªói v·ªõi UUID
  name        String    // T√™n danh m·ª•c (v√≠ d·ª•: To√°n, L√Ω, H√≥a)
  description String?   // M√¥ t·∫£ danh m·ª•c (t√πy ch·ªçn)
  active      Boolean   @default(true)
  userId     String?
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
}

model BankExam {
  id          String   @id @default(uuid()) // Add a unique ID field
  name        String
  description String?
  createdAt   DateTime  @default(now())
  userId     String?
  updatedAt   DateTime  @updatedAt
}
model BankExamHR {
  id          String   @id @default(uuid()) // Add a unique ID field
  name        String
  description String?
  createdAt   DateTime  @default(now())
  userId     String?
  updatedAt   DateTime  @updatedAt
  
}
model SectionHR {
  id          String    @id @default(uuid()) // Chuy·ªÉn id sang chu·ªói v·ªõi UUID
  name        String    // T√™n danh m·ª•c (v√≠ d·ª•: To√°n, L√Ω, H√≥a)
  description String?   // M√¥ t·∫£ danh m·ª•c (t√πy ch·ªçn)
  active      Boolean   @default(true)
  userId     String?
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
}

model QuestionHR {
  id            String   @id @default(uuid()) // Chuy·ªÉn id sang chu·ªói v·ªõi UUID
  content       String // N·ªôi dung c√¢u h·ªèi
  options       Json? // L·ª±a ch·ªçn tr·∫£ l·ªùi (l∆∞u d·∫°ng JSON: ["A", "B", "C", "D"])
  correctAnswer String? // ƒê√°p √°n ƒë√∫ng
  row          String[] // d√πng ƒë·ªÉ l∆∞u d√≤ng c√¢u h·ªèi cho type l√† grid
  correctAnswerMutilchoice String[]
  active        Boolean  @default(true)
  idbank        String?
  type          String?
  userId        String? // Chuy·ªÉn userId sang chu·ªói
  checkAI       Boolean  @default(true)
  correctAI     Int?
  prompt        String?
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
}
model ExamHR {
  id                  String    @id @default(uuid()) // Chuy·ªÉn id sang chu·ªói v·ªõi UUID
  userId              String // Chuy·ªÉn userId sang chu·ªói
  sectionId           Json // Chuy·ªÉn sectionId th√†nh m·∫£ng chu·ªói
  title               String
  startDate           DateTime
  endDate             DateTime?
  duration            Int
  questionCount       Int
  code                String?
  idLessonFile        String? // de thi cua buoi hoc tuong ung
  settings            Json?
  checktudongtinhDiem Boolean   @default(true)
  createdAt           DateTime  @default(now())
  updatedAt           DateTime  @updatedAt

  candidates Candidate[] @relation("CandidateExam")
  examAssignments ExamAssignment[]
}

model BaiThiHR {
  id           String    @id @default(uuid())
  nhanVienId   String // Li√™n k·∫øt v·ªõi NhanVien
  diem         Float? // ƒêi·ªÉm s·ªë (thang 10)
  ngayVaoThi   DateTime  @default(now()) // Ng√†y v√†o thi
  ngaynop      DateTime? // Ng√†y v√†o thi
  soCauDung    Int? // S·ªë c√¢u ƒë√∫ng
  createdOn    DateTime? @default(now())
  updatedOn    DateTime? @updatedAt
  createdById  String?
  updatedById  String?
  fileurl      String?
  idexam       String
  solanthi     Int?
  reportCauHoi Json?
  cauHoi       Json? // M·∫£ng JSON ch·ª©a danh s√°ch c√¢u h·ªèi
  examAssignments ExamAssignment[]
}

model ExamAssignment {
  id             String    @id @default(uuid())
  assigned_at    DateTime  @default(now())  // Th·ªùi ƒëi·ªÉm giao b√†i
  due_date       DateTime? // H·∫°n n·ªôp (t√πy ch·ªçn, c√≥ th·ªÉ sync t·ª´ ExamHR.endDate)
  status         String    @default("assigned")  // "assigned", "in_progress", "completed", "expired", "cancelled"
  note           String?   // Ghi ch√∫ giao b√†i (v√≠ d·ª•: "Giao qua email")
  created_by     String?   // ID ng∆∞·ªùi giao (user/recruiter)
  
  // Relations
  candidate_id   String
  candidate      Candidate @relation(fields: [candidate_id], references: [id], onDelete: Cascade)
  
  exam_id        String
  exam           ExamHR    @relation(fields: [exam_id], references: [id], onDelete: Cascade)
  
  // Optional: Link v·ªõi k·∫øt qu·∫£ thi n·∫øu ƒë√£ ho√†n th√†nh
  baiThiHR_id    String?   // ID c·ªßa BaiThiHR n·∫øu status = "completed"
  baiThiHR       BaiThiHR? @relation(fields: [baiThiHR_id], references: [id])
  
  // Optional: Link v·ªõi activity n·∫øu c·∫ßn track action
  candidate_activity_id String?
  candidate_activity    candidate_activity? @relation(fields: [candidate_activity_id], references: [id])
  
  created_at     DateTime  @default(now())
  updated_at     DateTime  @updatedAt
}
model Question {
  id            String   @id @default(uuid()) // Chuy·ªÉn id sang chu·ªói v·ªõi UUID
  content       String // N·ªôi dung c√¢u h·ªèi
  options       Json? // L·ª±a ch·ªçn tr·∫£ l·ªùi (l∆∞u d·∫°ng JSON: ["A", "B", "C", "D"])
  correctAnswer String? // ƒê√°p √°n ƒë√∫ng
  active        Boolean  @default(true)
  idbank        String?
  type          String?
  userId        String? // Chuy·ªÉn userId sang chu·ªói
  checkAI       Boolean  @default(true)
  correctAI     Int?
  prompt        String?
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
}

model Exam {
  id                  String    @id @default(uuid()) // Chuy·ªÉn id sang chu·ªói v·ªõi UUID
  userId              String // Chuy·ªÉn userId sang chu·ªói
  sectionId           Json // Chuy·ªÉn sectionId th√†nh m·∫£ng chu·ªói
  title               String
  startDate           DateTime?
  endDate             DateTime?
  duration            Int
  questionCount       Int
  code                String?
  idLessonFile        String? // de thi cua buoi hoc tuong ung
  settings            Json?
  checktudongtinhDiem Boolean   @default(true)
  createdAt           DateTime  @default(now())
  updatedAt           DateTime  @updatedAt
}

model Post {
  id        String    @id @default(uuid())
  content   String // N·ªôi dung b√†i vi·∫øt
  img       String[] // M·∫£ng ch·ª©a c√°c URL h√¨nh ·∫£nh
  hoTen     String // H·ªç t√™n c·ªßa user
  email     String // Email c·ªßa user
  diem      Float?
  createdOn DateTime  @default(now())
  updatedOn DateTime? @updatedAt
}

model ProgramCourse {
  id        String   @id @default(uuid()) // ID d·∫°ng chu·ªói, t·ª± ƒë·ªông t·∫°o UUID
  title     String
  id_user   String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Class {
  id           String   @id @default(uuid()) // Unique ID, auto-generated UUID
  name         String // Name of the class
  instructorId String // ID of the instructor (user)
  dsnv         String[] // Array of user email (nv enrolled)
  location     String? // Physical or virtual location
  startDate    DateTime? // Class start date
  endDate      DateTime? // Class end date
  createdAt    DateTime @default(now()) // Record creation time
  updatedAt    DateTime @updatedAt // Record last update time
  isActive     Boolean  @default(true) // Whether the class is currently active
  idUser       String
  notes        String? // Optional notes or additional info
  idForm       String?
}

model Attendance {
  id            String   @id @default(uuid())
  content       Json?
  answer        Json?
  courseId      String?
  classId       String?
  anttendant_id String?
  creatorId     String
  description   String?
  lessonFileId  String? // Kh√≥a ngo·∫°i li√™n k·∫øt v·ªõi Lesson
  startDate     DateTime?
  endDate       DateTime?
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  isActive      Boolean  @default(true)
}

model Course {
  id                String    @id @default(uuid()) // ID d·∫°ng chu·ªói, t·ª± ƒë·ªông t·∫°o UUID
  title             String
  code              String?   @unique // M√£ kh√≥a h·ªçc, duy nh·∫•t
  id_user           String
  id_programcourse  String?
  description       String?
  startDate         DateTime?
  endDate           DateTime?
  type              String?
  isPublic          Boolean?
  dsnv_public       String[]
  dsnv              String[] //  ds id nh√¢n vi√™n
  dsmonhoctruoc     String[] // l∆∞u c√°c id course ti√™n quy·∫øt c·ªßa kh√≥a h·ªçc n·∫£y
  levelcourseid     String?
  prerequisitelevel String[] // l∆∞u c·∫•p ƒë·ªô theo id ti√™n quy·∫øt c·ªßa kh√≥a h·ªçc n√†y
  createdAt         DateTime  @default(now())
  specifiedScore    Float? // ƒëi·ªÉm t·ªëi thi·ªÉu ƒë·ªÉ ho√†n th√†nh kh√≥a h·ªçc
  updatedAt         DateTime  @updatedAt
  idClass           String?
  image             String?
  idForm            String?
}

model Level {
  id          String  @id @default(uuid()) // ID d·∫°ng chu·ªói, t·ª± ƒë·ªông t·∫°o UUID
  name        String?
  description String?
  id_creator  String?
}

model SectionLesson {
  id        String   @id @default(uuid())
  name      String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Enroll {
  id            String   @id @default(uuid())
  userId        String
  lessonId      String
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  isCertificate Boolean?
  status        String?
}

model LessonFileProgress {
  id           String    @id @default(uuid())
  lessonFileId String // ID c·ªßa LessonFile
  userId       String // ID c·ªßa nh√¢n vi√™n
  completed    Boolean   @default(false) // Tr·∫°ng th√°i ho√†n th√†nh
  completedAt  DateTime? // Th·ªùi ƒëi·ªÉm ho√†n th√†nh (t√πy ch·ªçn)
  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @updatedAt

  @@unique([lessonFileId, userId])
}

model LessonFile {
  id        String   @id @default(uuid()) // ID d·∫°ng chu·ªói, t·ª± ƒë·ªông t·∫°o UUID
  title       String // ti√™u ƒë·ªÅ bu·ªïi h·ªçc
  description String? // m√¥ t·∫£ bu·ªïi h·ªçc
  file       String[]   // URL c·ªßa files
  groupleader String[]
  startDate   DateTime?
  endDate     DateTime?
  active     Boolean   @default(true)  
  weight      Float?
  weightExam  Float?
  lessonId  String   // Kh√≥a ngo·∫°i li√™n k·∫øt v·ªõi Lesson
  lectureId String?
  sectionlessonId String?
  studyguide  String?
  enableAttendance Boolean?
  enableLessonSubmit   Boolean?
  createdAt DateTime @default(now())
  updatedAt   DateTime  @updatedAt
  type        String?
  markmap     String?
}

model FileBaiTapNhom {
  id           String   @id @default(uuid()) // Unique identifier, auto-generated UUID
  lessonFileId String // ID of the session (buoi hoc)
  courseId     String // ID of the course (khoahoc)
  groupName    String? // Name of the group (ten nhom)
  groupScore   Float? // Score of the group assignment (diem bai tap nhom), optional
  files        String[] // Array of file paths or URLs (file[])
  tasks        String[] // Array of tasks (nv[])
  userId       String // ID of the user who created the record
  createdDate  DateTime @default(now()) // Creation date, auto-set to current timestamp
  updatedDate  DateTime @updatedAt // Last updated date, auto-updated on changes
}

model PostVote {
  id        String    @id @default(uuid())
  postId    String // Li√™n k·∫øt v·ªõi Post
  email     String
  voteType  String // Lo·∫°i b√¨nh ch·ªçn (v√≠ d·ª•: "LIKE", "DISLIKE", "UPVOTE", "DOWNVOTE")
  createdOn DateTime  @default(now())
  updatedOn DateTime? @updatedAt
}

model Log {
  id        String    @id @default(uuid())
  videoName String // T√™n video li√™n quan ƒë·∫øn h√†nh ƒë·ªông
  email     String // Email c·ªßa ng∆∞·ªùi d√πng th·ª±c hi·ªán h√†nh ƒë·ªông
  action    String // Lo·∫°i h√†nh ƒë·ªông (v√≠ d·ª•: "copy_url", "context_menu_modal")
  createdOn DateTime  @default(now())
  updatedOn DateTime? @updatedAt
}

// ƒê·ªãnh nghƒ©a model Comment
model Comment {
  id        String   @id @default(uuid())
  id_user   String // ID c·ªßa ng∆∞·ªùi d√πng b√¨nh lu·∫≠n
  id_course String // ID c·ªßa kh√≥a h·ªçc
  content   String // N·ªôi dung b√¨nh lu·∫≠n
  createdAt DateTime @default(now()) // Th·ªùi gian t·∫°o
  updatedAt DateTime @updatedAt // Th·ªùi gian c·∫≠p nh·∫≠t
}

// ƒê·ªãnh nghƒ©a model Reply
model Reply {
  id         String   @id @default(uuid())
  id_comment String // ID c·ªßa b√¨nh lu·∫≠n
  id_user    String // ID c·ªßa ng∆∞·ªùi d√πng ph·∫£n h·ªìi
  content    String // N·ªôi dung ph·∫£n h·ªìi
  createdAt  DateTime @default(now()) // Th·ªùi gian t·∫°o
  updatedAt  DateTime @updatedAt // Th·ªùi gian c·∫≠p nh·∫≠t
}

model Form {
  id          String         @id @default(cuid())
  title       String?
  description String?
  createdBy   String // userId c·ªßa admin t·∫°o form
  createdAt   DateTime       @default(now())
  updatedAt   DateTime       @updatedAt
  fields      FormField[] // 1-n: c√°c c√¢u h·ªèi trong form
  responses   FormResponse[] // 1-n: c√°c ph·∫£n h·ªìi
  startDate   DateTime?
  endDate     DateTime?
  type        String         @default("public") // public, course, lesson, class 
}

model FormField {
  id     String @id @default(cuid())
  form   Form   @relation(fields: [formId], references: [id])
  formId String

  label    String // n·ªôi dung c√¢u h·ªèi
  type     FieldType // lo·∫°i c√¢u h·ªèi
  options  Json? // cho RADIO, CHECKBOX, SELECT: ["Option A", "Option B"]
  required Boolean   @default(false)
  order    Int // th·ª© t·ª± hi·ªÉn th·ªã
}

model FormResponse {
  id          String   @id @default(cuid())
  form        Form     @relation(fields: [formId], references: [id])
  formId      String
  idMain      String? // id chung ƒë·ªÉ l∆∞u course, lesson, class
  userId      String // ng∆∞·ªùi d√πng g·ª≠i form
  submittedAt DateTime @default(now())
  answers     Json
}

enum FieldType {
  TEXT
  RADIO
  CHECKBOX
  SELECT
  NUMBER
  DATE
  FILE
}

model FormAssignment {
  id        String   @id @default(cuid())
  idMain    String?
  formId    String
  startDate DateTime?
  endDate   DateTime?
}
